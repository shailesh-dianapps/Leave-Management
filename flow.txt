PORT=4000
MONGO_URI=mongodb://localhost:27017/leave_system
JWT_SECRET=ed827e33ed36aba5a874ee4e94443429222a56ae7f5850a0e112690aa8fafaf3f90009ca6ac70f65bc372b7dff9b47488a0e28c7f3eefde952f8c5f9c985e779
JWT_EXPIRES_IN=7d



ğŸ”„ Testing Flow
1. Register Users

POST /api/auth/register

Register Employee â†’ role: "employee"

Register HR â†’ role: "hr"

Register Management â†’ role: "management"

âœ… Expected: All users created in DB with default leave bank (2 per month).

2. Login

POST /api/auth/login for each user

Get JWT token for Employee, HR, and Management.

âœ… Expected: Token returned. Use it in Authorization: Bearer <token> for next requests.

3. Employee Actions

View leave history

GET /api/leaves/mine

âœ… Should return empty initially.

View public holidays

GET /api/holidays

âœ… Should return holidays (empty if none added yet).

Apply leave

POST /api/leaves/apply

{ "leaveType": "sick", "startDate": "2025-09-10", "endDate": "2025-09-12", "comment": "Flu" }


âœ… Status = pending, leave bank unchanged.

Check leave balance after approval

After HR approves, check again with GET /api/users/me

âœ… Leave balance reduced (weekends + public holidays excluded).

4. HR Actions

View own leaves

GET /api/leaves/mine

View employees' pending leaves

GET /api/leaves/pending

âœ… Should show Employeeâ€™s leave request.

Approve/Reject employee leave

POST /api/leaves/:id/approve OR reject

âœ… Employeeâ€™s leave status updated.

Apply own leave

POST /api/leaves/apply

âœ… Status = pending, only Management can approve it.

Add/Edit public holiday

POST /api/holidays/add

{ "date": "2025-09-15", "name": "Independence Day" }


âœ… Holiday visible in GET /api/holidays

Fetch employees list

GET /api/users

âœ… Returns all employees with roles.

5. Management Actions

View all leave requests

GET /api/leaves/all

âœ… Should see Employee + HR leaves.

Approve/Reject HR leave

POST /api/leaves/:id/approve

âœ… HRâ€™s leave gets approved, balance deducted.

âš ï¸ Should not allow approving Employee leaves (only HR can).

6. Logout

POST /api/auth/logout

Send token in header.

âœ… Token stored in blacklist, canâ€™t be reused.

Try calling any API with blacklisted token â†’ should return 401 Unauthorized.